<div class="right_col" role="main">
    <div class="row">
        <div class="col-md-4 col-sm-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>CPU Usage</h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content" style="display: block;">
                    <div style="text-align: center; margin-bottom: 17px">
                        <iframe class="chartjs-hidden-iframe" style="width: 100%; display: block; border: 0px; height: 0px; margin: 0px; position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px;"></iframe>
                        <canvas id="cpu" height="350" width="350" style="height: 110px; width: 110px;"></canvas>
                    </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Memory Usage</h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content" style="display: block;">
                    <div style="text-align: center; margin-bottom: 17px">
                    <span class="chart ram" data-percent="98">
                    <span id="mem_doughnut" class="percent">86</span>
                        <canvas height="220" width="220" style="height: 110px; width: 110px;"></canvas>
                    </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Disk Usage</h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content" style="display: block;">
                    <div style="text-align: center; margin-bottom: 17px">
                    <span class="chart disk" data-percent="98">
                    <span id="disk_doughnut" class="percent">86</span>
                        <canvas height="220" width="220" style="height: 110px; width: 110px;"></canvas>
                    </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 col-sm-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Last sessions</h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content" style="display: block;">
                    <table id="datatable" class="table table-striped table-bordered dataTable no-footer" role="grid" aria-describedby="datatable_info">
                        <thead>
                        <tr role="row">
                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 206.889px;">Name</th>
                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 330.889px;">Position</th>
                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 152.889px;">Office</th>
                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 81.8889px;">Age</th>
                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 154.889px;">Start date</th>
                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 120px;">Salary</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr role="row" class="odd">
                            <td class="sorting_1">Airi Satou</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>33</td>
                            <td>2008/11/28</td>
                            <td>$162,700</td>
                        </tr><tr role="row" class="even">
                            <td class="sorting_1">Angelica Ramos</td>
                            <td>Chief Executive Officer (CEO)</td>
                            <td>London</td>
                            <td>47</td>
                            <td>2009/10/09</td>
                            <td>$1,200,000</td>
                        </tr><tr role="row" class="odd">
                            <td class="sorting_1">Ashton Cox</td>
                            <td>Junior Technical Author</td>
                            <td>San Francisco</td>
                            <td>66</td>
                            <td>2009/01/12</td>
                            <td>$86,000</td>
                        </tr><tr role="row" class="even">
                            <td class="sorting_1">Bradley Greer</td>
                            <td>Software Engineer</td>
                            <td>London</td>
                            <td>41</td>
                            <td>2012/10/13</td>
                            <td>$132,000</td>
                        </tr><tr role="row" class="odd">
                            <td class="sorting_1">Brenden Wagner</td>
                            <td>Software Engineer</td>
                            <td>San Francisco</td>
                            <td>28</td>
                            <td>2011/06/07</td>
                            <td>$206,850</td>
                        </tr><tr role="row" class="even">
                            <td class="sorting_1">Brielle Williamson</td>
                            <td>Integration Specialist</td>
                            <td>New York</td>
                            <td>61</td>
                            <td>2012/12/02</td>
                            <td>$372,000</td>
                        </tr><tr role="row" class="odd">
                            <td class="sorting_1">Bruno Nash</td>
                            <td>Software Engineer</td>
                            <td>London</td>
                            <td>38</td>
                            <td>2011/05/03</td>
                            <td>$163,500</td>
                        </tr><tr role="row" class="even">
                            <td class="sorting_1">Caesar Vance</td>
                            <td>Pre-Sales Support</td>
                            <td>New York</td>
                            <td>21</td>
                            <td>2011/12/12</td>
                            <td>$106,450</td>
                        </tr><tr role="row" class="odd">
                            <td class="sorting_1">Cara Stevens</td>
                            <td>Sales Assistant</td>
                            <td>New York</td>
                            <td>46</td>
                            <td>2011/12/06</td>
                            <td>$145,600</td>
                        </tr><tr role="row" class="even">
                            <td class="sorting_1">Cedric Kelly</td>
                            <td>Senior Javascript Developer</td>
                            <td>Edinburgh</td>
                            <td>22</td>
                            <td>2012/03/29</td>
                            <td>$433,060</td>
                        </tr></tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">

            <section class="x_panel">

                <div class="x_title">
                    <h2>Server Information</h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content">
                    <h3 class="green"><i class="fa fa-paint-brush"></i> Gentelella</h3>

                    <p>Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terr.</p>
                    <br>

                    <div class="project_detail">

                        <p class="title">Client Company</p>
                        <p>Deveint Inc</p>
                        <p class="title">Project Leader</p>
                        <p>Tony Chicken</p>
                    </div>

                    <br>
                    <h5>Project files</h5>
                    <ul class="list-unstyled project_files">
                        <li><a href=""><i class="fa fa-file-word-o"></i> Functional-requirements.docx</a>
                        </li>
                        <li><a href=""><i class="fa fa-file-pdf-o"></i> UAT.pdf</a>
                        </li>
                        <li><a href=""><i class="fa fa-mail-forward"></i> Email-from-flatbal.mln</a>
                        </li>
                        <li><a href=""><i class="fa fa-picture-o"></i> Logo.png</a>
                        </li>
                        <li><a href=""><i class="fa fa-file-word-o"></i> Contract-10_12_2014.docx</a>
                        </li>
                    </ul>
                    <br>

                    <div class="text-center mtop20">
                        <a href="#" class="btn btn-sm btn-primary">Add files</a>
                        <a href="#" class="btn btn-sm btn-warning">Report contact</a>
                    </div>
                </div>

            </section>

        </div>
    </div>
</div>

<div id="js_to_eval">
    <!--temporary set up of charts while there's no cgi entry point to query for information or websocket to get info from
-->
    <script id="to_eval" type="text/javascript">


        var chart_cpu = new Chart(document.getElementById('cpu'), {
            type: 'doughnut',
            tooltipFillColor: "rgba(51, 51, 51, 0.55)",
            data: {
                labels: [
                    "usr",
                    "nice",
                    "sys",
                    "iowait",
                    "irq",
                    "soft",
                    "steal",
                    "guest",
                    "gnice",
                    "idle"
                ],
                datasets: [{
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 100],
                    backgroundColor: [
                        "#FF0000",
                        "#BFBF00",
                        "#008000",
                        "#80FFFF",
                        "#8080FF",
                        "#BF40BF",
                        "#79ff4d",
                        "#411BEA",
                        "#ED7651",
                        "#808080"
                    ],
                    hoverBackgroundColor: [
                        "#FF0000",
                        "#BFBF00",
                        "#008000",
                        "#80FFFF",
                        "#8080FF",
                        "#BF40BF",
                        "#79ff4d",
                        "#411BEA",
                        "#ED7651",
                        "#808080"
                    ]
                }]
            },
            options: {
                legend: false,
                responsive: false
            }
        });


        $('.chart.ram').easyPieChart({
            easing: 'easeOutElastic',
            delay: 3000,
            barColor: '#26793A',
            trackColor: '#fff',
            scaleColor: false,
            lineWidth: 20,
            trackWidth: 16,
            lineCap: 'butt',
            onStep: function(from, to, percent) {
                $(this.el).find('.percent').text(Math.round(percent));
            }
        });


        $('.chart.disk').easyPieChart({
            easing: 'easeOutElastic',
            delay: 3000,
            barColor: '#36198A',
            trackColor: '#fff',
            scaleColor: false,
            lineWidth: 20,
            trackWidth: 16,
            lineCap: 'butt',
            onStep: function(from, to, percent) {
                $(this.el).find('.percent').text(Math.round(percent));
            }
        });

        $('.collapse-link').on('click', function() {
            var $BOX_PANEL = $(this).closest('.x_panel'),
                    $ICON = $(this).find('i'),
                    $BOX_CONTENT = $BOX_PANEL.find('.x_content');

            // fix for some div with hardcoded fix class
            if ($BOX_PANEL.attr('style')) {
                $BOX_CONTENT.slideToggle(200, function(){
                    $BOX_PANEL.removeAttr('style');
                });
            } else {
                $BOX_CONTENT.slideToggle(200);
                $BOX_PANEL.css('height', 'auto');
            }

            $ICON.toggleClass('fa-chevron-up fa-chevron-down');
        });

        $('.close-link').click(function () {
            var $BOX_PANEL = $(this).closest('.x_panel');

            $BOX_PANEL.remove();
        });

        <!-- Datatables -->
        $(document).ready(function() {
            var handleDataTableButtons = function() {
                if ($("#datatable-buttons").length) {
                    $("#datatable-buttons").DataTable({
                        dom: "Bfrtip",
                        buttons: [
                            {
                                extend: "copy",
                                className: "btn-sm"
                            },
                            {
                                extend: "csv",
                                className: "btn-sm"
                            },
                            {
                                extend: "excel",
                                className: "btn-sm"
                            },
                            {
                                extend: "pdfHtml5",
                                className: "btn-sm"
                            },
                            {
                                extend: "print",
                                className: "btn-sm"
                            },
                        ],
                        responsive: true
                    });
                }
            };

            TableManageButtons = function() {
                "use strict";
                return {
                    init: function() {
                        handleDataTableButtons();
                    }
                };
            }();

            $('#datatable').dataTable();

            $('#datatable-keytable').DataTable({
                keys: true
            });

            $('#datatable-responsive').DataTable();

            $('#datatable-scroller').DataTable({
                ajax: "js/datatables/json/scroller-demo.json",
                deferRender: true,
                scrollY: 380,
                scrollCollapse: true,
                scroller: true
            });

            $('#datatable-fixed-header').DataTable({
                fixedHeader: true
            });

            var $datatable = $('#datatable-checkbox');

            $datatable.dataTable({
                'order': [[ 1, 'asc' ]],
                'columnDefs': [
                    { orderable: false, targets: [0] }
                ]
            });
            $datatable.on('draw.dt', function() {
                $('input').iCheck({
                    checkboxClass: 'icheckbox_flat-green'
                });
            });

            TableManageButtons.init();
        });
    <!-- /Datatables -->

    <!-- update performance -->
        window.setInterval(function (){

            $.ajax({
                type: "POST",
                url: '/cgi-bin/dashboard.sh',
                accepts:{
                    json: 'text/json'
                },
                context: this,
                dataType: "json",

                // html retrieve call was *not* successful
                error: function(payload) {
                    console.log(payload);
                    console.log("could not get data for dashboard async");
                    chart_cpu.data.datasets[0].data = [10,5,5,10,2,23,7,9,12,17];
                    chart_cpu.update();

                },

                // json retrieve call was successful
                //insert it on the main div. Since we just loaded the html we do not have to remove any content since its empty
                success: function(dades){
                    chart_cpu.data.datasets[0].data = dades.cpu;
                    chart_cpu.update();
                },

                failure: function () {
                    console.log("failure update usage mate");
                }
            })

        }, 1000);

    </script>
    <!-- /page content -->

</div>
